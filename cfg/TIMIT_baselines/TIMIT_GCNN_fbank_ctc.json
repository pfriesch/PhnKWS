{
  "exp": {
    "save_dir": "exp",
    "name": "TIMIT_GCNN_fbank_ctc",
    "seed": 2234,
    "n_gpu": 1,
    "prefetch_to_gpu": true,
    "n_epochs_tr": 5,
    "save_period": 1
  },
  "data_use": {
    //todo allow multiple inputs
    "train_with": "TIMIT_tr",
    "valid_with": "TIMIT_dev",
    "test_with": "TIMIT_test",
    "kws_eval_with": "google_speech_commands_dev"
  },
  "datasets": {
    "TIMIT_tr": {
      "features": {
        "fbank": {
          "feature_lst_path": "/mnt/data/libs/kaldi/egs/timit/s5/data/train/feats_fbank.scp",
          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/timit/s5/data/train/utt2spk  ark:/mnt/data/libs/kaldi/egs/timit/s5/fbank/cmvn_train.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
          "n_chunks": 2
        }
      },
      "labels": {
        "lab_phn": {
          "label_folder": "/mnt/data/libs/kaldi/egs/timit/s5/exp/dnn4_pretrain-dbn_dnn_ali",
          "label_opts": "ali-to-phones",
          "lab_count_file": "none",
          "lab_data_folder": "/mnt/data/libs/kaldi/egs/timit/s5/data/train/",
          "lab_graph": "/mnt/data/libs/kaldi/egs/timit/s5/exp/tri3/graph",
          "label_folder_extracted": "/mnt/data/libs/kaldi/egs/timit/s5/exp/dnn4_pretrain-dbn_dnn_ali/labels_extracted/"
        }
      }
    },
    "TIMIT_dev": {
      "features": {
        "fbank": {
          "feature_lst_path": "/mnt/data/libs/kaldi/egs/timit/s5/data/dev/feats_fbank.scp",
          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/timit/s5/data/dev/utt2spk  ark:/mnt/data/libs/kaldi/egs/timit/s5/fbank/cmvn_dev.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
          "n_chunks": 1
        }
      },
      "labels": {
        "lab_phn": {
          "label_folder": "/mnt/data/libs/kaldi/egs/timit/s5/exp/dnn4_pretrain-dbn_dnn_ali_dev",
          "label_opts": "ali-to-phones",
          "lab_count_file": "none",
          "lab_data_folder": "/mnt/data/libs/kaldi/egs/timit/s5/data/dev/",
          "lab_graph": "/mnt/data/libs/kaldi/egs/timit/s5/exp/tri3/graph",
          "label_folder_extracted": "/mnt/data/libs/kaldi/egs/timit/s5/exp/dnn4_pretrain-dbn_dnn_ali_dev/labels_extracted/"
        }
      }
    },
    "TIMIT_test": {
      "features": {
        "fbank": {
          "feature_lst_path": "/mnt/data/libs/kaldi/egs/timit/s5/data/test/feats_fbank.scp",
          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/timit/s5/data/test/utt2spk  ark:/mnt/data/libs/kaldi/egs/timit/s5/fbank/cmvn_test.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
          "n_chunks": 1
        }
      },
      "labels": {
        "lab_phn": {
          "label_folder": "/mnt/data/libs/kaldi/egs/timit/s5/exp/dnn4_pretrain-dbn_dnn_ali_test",
          "label_opts": "ali-to-phones",
          "lab_count_file": "none",
          "lab_data_folder": "/mnt/data/libs/kaldi/egs/timit/s5/data/test/",
          "lab_graph": "/mnt/data/libs/kaldi/egs/timit/s5/exp/tri3/graph",
          "label_folder_extracted": "/mnt/data/libs/kaldi/egs/timit/s5/exp/dnn4_pretrain-dbn_dnn_ali_test/labels_extracted/"
        }
      }
    }
  },
  "google_speech_commands_dev": {
    "features": {
      "fbank": {
        "feature_lst_path": "/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/dev/feats.scp",
        "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/dev/utt2spk  ark:/mnt/data/libs/kaldi/egs/google_speech_commands/kws/fbank/cmvn_dev.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |"
      }
    },
    "labels": {
      "lab_text": {
        "text_path": "/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/text"
      }
    }
  },
  "google_speech_commands_test": {
    "features": {
      "fbank": {
        "feature_lst_path": "/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/feats.scp",
        "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/utt2spk  ark:/mnt/data/libs/kaldi/egs/google_speech_commands/kws/fbank/cmvn_test.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |"
      }
    },
    "labels": {
      "lab_text": {
        "text_path": "/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/text"
      }
    }
  },
  "training": {
    "batch_size_train": 8,
    "max_seq_length_train": 10000,
    "increase_seq_length_train": true,
    "start_seq_len_train": 2000,
    "multply_factor_seq_len_train": 2,
    "batch_size_valid": 8,
    "max_seq_length_valid": 20000,
    "sort_by_feat": "fbank",
    "clip_grad_norm": 1.0,
    "optimizer": {
      "type": "adam",
      "args": {
        "lr": 0.001
      }
    },
    "lr_scheduler": {
      "arch_halving_factor": 0.5,
      "arch_improvement_threshold": 0.001
    }
  },
  "arch": {
    "name": "GCNN_phn",
    "framewise_labels": false,
    "args": {
      "input_feat_length": 40,
      "input_feat_name": "fbank",
      "lab_phn_num": 48,
      "N_filters": [300, 300, 300, 300, 400, 500, 600],
      "kernel_sizes": [
        [1, 10],
        [1, 3],
        [1, 3],
        [1, 3],
        [1, 4],
        [1, 5],
        [1, 7]
      ],
      "dropout": [0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25, 0.25]
    },
    "loss": {
      "name": "ctc_phn",
      "args": {
      }
    },
    "metrics": [
      "phone_error_rate"
    ]
  },
  "kws_decoding": {
  }
}