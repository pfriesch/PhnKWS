{
  "exp": {
    "save_dir": "exp",
    "name": "libri_LSTM_fbank",
    "seed": 2234,
    "n_gpu": 1,
    "prefetch_to_gpu": false,
    "n_epochs_tr": 1,
    "save_period": 1
  },
  "data_use": {
    //todo allow multiple inputs
    "train_with": "train_clean_100",
    "valid_with": "dev_clean",
    "test_with": "test_clean"
  },
  "datasets": {
    "train_clean_100": {
      "features": {
        "fbank": {
          "feature_lst_path": "/mnt/data/libs/kaldi/egs/librispeech/s5/data/train_clean_100/feats_fbank.scp",
          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/librispeech/s5/data/train_clean_100/utt2spk  ark:/mnt/data/libs/kaldi/egs/librispeech/s5/fbank/cmvn_train_clean_100.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
          "cw_left": 0,
          "cw_right": 0
        }
      },
      "labels": {
        "lab_phn": {
          "phn_mapping": "/mnt/data/pytorch-kaldi/data/phonemes/train_clean_100/phn_mapping.json",
          "phn_mapping_id": "/mnt/data/pytorch-kaldi/data/phonemes/train_clean_100/phn_mapping_id.json",
          "phn_transcripts": "/mnt/data/pytorch-kaldi/data/phonemes/train_clean_100/phn_transcripts.json",
          "total_phn_count": "/mnt/data/pytorch-kaldi/data/phonemes/train_clean_100/total_phn_count.json"
        }
      }
    },
    "dev_clean": {
      "features": {
        "fbank": {
          "feature_lst_path": "/mnt/data/libs/kaldi/egs/librispeech/s5/data/dev_clean/feats_fbank.scp",
          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/librispeech/s5/data/dev_clean/utt2spk  ark:/mnt/data/libs/kaldi/egs/librispeech/s5/fbank/cmvn_dev_clean.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
          "cw_left": 0,
          "cw_right": 0
        }
      },
      "labels": {
        "lab_phn": {
          "phn_mapping": "/mnt/data/pytorch-kaldi/data/phonemes/dev_clean/phn_mapping.json",
          "phn_mapping_id": "/mnt/data/pytorch-kaldi/data/phonemes/dev_clean/phn_mapping_id.json",
          "phn_transcripts": "/mnt/data/pytorch-kaldi/data/phonemes/dev_clean/phn_transcripts.json",
          "total_phn_count": "/mnt/data/pytorch-kaldi/data/phonemes/dev_clean/total_phn_count.json"
        }
      }
    },
    "test_clean": {
      "features": {
        "fbank": {
          "feature_lst_path": "/mnt/data/libs/kaldi/egs/librispeech/s5/data/test_clean/feats_fbank.scp",
          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/librispeech/s5/data/test_clean/utt2spk  ark:/mnt/data/libs/kaldi/egs/librispeech/s5/fbank/cmvn_test_clean.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
          "cw_left": 0,
          "cw_right": 0
        }
      },
      "labels": {
        "lab_phn": {
          "phn_mapping": "/mnt/data/pytorch-kaldi/data/phonemes/test_clean/phn_mapping.json",
          "phn_mapping_id": "/mnt/data/pytorch-kaldi/data/phonemes/test_clean/phn_mapping_id.json",
          "phn_transcripts": "/mnt/data/pytorch-kaldi/data/phonemes/test_clean/phn_transcripts.json",
          "total_phn_count": "/mnt/data/pytorch-kaldi/data/phonemes/test_clean/total_phn_count.json"
        }
      }
    }
  },
  //    "google_speech_commands_test": {
  //      "features": {
  //        "fbank": {
  //          "feature_lst_path": "/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/feats_fbank.scp",
  //          "feature_opts": "apply-cmvn --utt2spk=ark:/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/utt2spk  ark:/mnt/data/libs/kaldi/egs/google_speech_commands/kws/fbank_kws/cmvn_test.ark ark:- ark:- | add-deltas --delta-order=0 ark:- ark:- |",
  //          "cw_left": 0,
  //          "cw_right": 0
  //        }
  //      },
  //      "labels": {
  //        "lab_text": {
  //          "text_path": "/mnt/data/libs/kaldi/egs/google_speech_commands/kws/data_kws/test/text"
  //        }
  //      }
  //    }
  //  },
  "training": {
    "batch_size_train": 8,
    "max_seq_length_train": 1000,
    "increase_seq_length_train": true,
    "start_seq_len_train": 100,
    "multply_factor_seq_len_train": 2,
    "batch_size_valid": 8,
    "max_seq_length_valid": 1000,
    "sort_by_feat": "fbank",
    "clip_grad_norm": -1,
    "optimizer": {
      "type": "adam",
      "args": {
        "lr": 0.0016
      }
    },
    "lr_scheduler": {
      "arch_halving_factor": 0.5,
      "arch_improvement_threshold": 0.001
    }
  },
  "arch": {
    "name": "LSTM_cd_mono",
    "args": {
      "input_feat_length": 40,
      "input_feat_name": "fbank",
      "lab_mon_num": 346
    },
    "loss": {
      "name": "ctc",
      "args": {
      }
    },
    "metrics": [
      "acc_lab_phn"
    ]
  }
}